<script src="../lib/fx.js"></script>

<script>
  const products = [
    { name: '반팔티', price: 15_000 },
    { name: '긴팔티', price: 20_000 },
    { name: '핸드폰 케이스', price: 15_000 },
    { name: '후드티', price: 30_000 },
    { name: '바지', price: 25_000 },
  ];
</script>

# 2만원 이하의 상품들의 price를 모두 더한 값을 구하기
<script>
  const add = (a, b) => a + b;

  // filter를 먼저
  log(
    reduce(
      add,
      map(p => p.price,
        filter(p => p.price < 20_000, products))));

  // map을 먼저
  log(
    reduce(
      add,
      filter(n => n < 20_000,
        map(p => p.price, products))));
</script>

# 함수형 코드 작성 팁
- 함수형 프로그래밍은 아래와 같은 흐름으로 사고한다.
<script>
  /** Step 1.
   * reduce 함수에는 add와 숫자 배열이 올 것을 기대한다.
   * 잘 동작할 준비가 된 코드를 작성해두고, 숫자가 들어있는 배열로 평가되도록 코드를 작성한다.
   */
  log(
    reduce(
      add,
      [10, 20, 30, 40]));

  /** Step 2.
   * map을 사용하여 숫자 배열로 평가되도록 한다.
   */
  log(
    reduce(
      add,
      map(p => p.price, products)));


  /** Step 3.
   * products에 아래와 같은 배열이 들어오도록 기대하고 코드를 짠다.
   */
  log(
    reduce(
      add,
      map(p => p.price, [
        { name: '반팔티', price: 15_000 },
        { name: '핸드폰 케이스', price: 15_000 }
      ])));

  log(
    reduce(
      add,
      map(p => p.price,
        filter(p => p.price < 20_000, products))));

</script>